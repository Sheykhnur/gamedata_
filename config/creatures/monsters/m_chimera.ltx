;*********************************************************************************
; BASE PROFILE
;*********************************************************************************
[m_chimera_e]:monster_base
GroupControlSection                 = spawn_group

;-- barin start
;--SpaceRestrictionSection = space_restrictor,zone_mosquito_bald,zone_witches_galantine,zone_burning_fuzz1,zone_mincer,zone_gravi_zone

;-- space restrictor, Burner, Electro, Radioactivity, Fruit punch, Burnt Fuzz, Whirligig, Vortex, Springboard, ???
SpaceRestrictionSection             = space_restrictor, zone_zharka_static, zone_witches_galantine, zone_radioactive, zone_ameba, zone_burning_fuzz1, zone_mincer, zone_gravi_zone, zone_mosquito_bald, zone_buzz
;-- barin end

$npc                                = on						; option for Level Editor
$prefetch                           = 16
Scheduled                           = on						; option for ALife Simulator
Human                               = off						; option for ALife Simulator
Health                              = 400						; option for ALife Simulator
MinSpeed                            = 1.0						; option for ALife Simulator
MaxSpeed                            = 1.5						; option for ALife Simulator
going_speed                         = 1.0                      ; option for ALife Simulator
search_speed                        = .5                       ; option for ALife Simulator
visual                              = monsters\chimera\chimera_01
corpse_visual                       = monsters\chimera\chimera_01
icon                                = ui_npc_monster_chimera
MaxHealthValue                      = 400			; range [0..200]
DynamicObjectsCount                 = 32

ef_creature_type                    = 20							; option for evaluation functions
ef_weapon_type                      = 3
ef_detector_type                    = 1
panic_threshold                     = 0.0

carbody_name                        = Chimera


Spawn_Inventory_Item_Section        = mutant_chimera_hand
Spawn_Inventory_Item_Class   		= himera
Spawn_Inventory_Item_Probability    = 0.7
character_use						= dead_paw_use

cform                               = skeleton					; collision class
class                               = SM_CHIMS					; AI class

script_binding                      = bind_monster.bind

satiety_threshold                   = 0.5


critical_wound_threshold            = -1
critical_wound_decrease_quant       = 0.
smart_terrain_choose_interval       = 00:15:00

bone_torso                          = bip01_spine1 			; bone name
bone_head                           = bip01_head				; bone name
bone_fire                           = bip01_head				; bone name
weapon_usage                        = 0						; boolean

ph_box0_center                      = 0.0,  0.9,  0.0
ph_box0_size                        = 0.35, 0.9,  0.35
ph_box1_center                      = 0.0,  0.6,  0.0
ph_box1_size                        = 0.40, 0.6,  0.40
ph_crash_speed_min                  = 10
ph_crash_speed_max                  = 30
ph_collision_damage_factor          = 0.02
ph_mass 		     			    = 140

destroyed_vis_name                  = physics\dead_body\skelet_crash_monster

Particle_Tele_Object                = static\fire_distort
Particle_Gravi_Wave                 = anomaly2\burer_wave
Particle_Gravi_Prepare              = anomaly2\burer_prepare
Particle_Shield                     = anomaly2\burer_shield_01

;---------------------------------------------------------------------
ph_skeleton_airr_lin_factor         = 2.0 ;550.0 (изменно из-за того, что убрано домножение коэффициент 0.002 из кода)
ph_skeleton_airr_ang_factor         = 0.0 ;0.0 (изменно из-за того, что убрано домножение на коэффициент 0.3 из кода (0.0*0.3=0.0))
ph_skeleton_hinger_factor1          = 1.0 ;1.0 (изменно из-за того, что убрано домножение на коэффициент 5.0 из кода)
ph_skeleton_ddelay                  = 15.0 ;Время изменения значения трения в суставе с момента создания шелла, сек

; ph_skel_fatal_impulse_factor        = 12.0
;---------------------------------------------------------------------

SoundThreshold                      = 0.06             ; range [0..1]

max_hear_dist                       = 100


; speed factors						linear | angular_real | angular_path | min |  max
Velocity_Stand                      = 0,		4.5,			4.5,		1,		1
Velocity_RunFwdNormal               = 11,		7.0,			7.0,		0.2,	1
Velocity_RunFwdDamaged              = 4.5,  	4.0,			4.0,		0.2,	1
Velocity_WalkFwdDamaged             = 2.0,		2.0,			2.0,		0.5,	2.0
Velocity_WalkFwdNormal              = 3.3,		1.2,			1.2,		0.02,	3.0
Velocity_Drag                       = 1.0,		3.0,			3.0,		1,		1
Velocity_Steal                      = 1.5,		2.0,			2.0,		1,		1
Velocity_Walk_Upper                 = 0.5,		1.2,			1.2,		0.02,	2.0
Velocity_JumpGround                 = 8.0,		0.01,			0.01,		0.4,	1
Velocity_RunAttack                  = 10,		0.01,			0.01,		0.2,	1
Velocity_Run_Attack                 = 10,		0.01,			0.01,		0.2,	1

; acceleration
Accel_Generic                       = 4.0
Accel_Calm                          = 6.0
Accel_Aggressive                    = 12.0

;--------------------------------------------------------------------------
; Attack parameters
;--------------------------------------------------------------------------
MinAttackDist                       = 1.0
MaxAttackDist                       = 2.4

as_min_dist                         = 0.9
as_step                             = 0.3

hit_type                            = wound			; type of attack

;--------------------------------------------------------------------------
; Jump parameters
;--------------------------------------------------------------------------
jump_delay						= 1  ; минимальная задержка после прыжка до возможности следующего прыжка
jump_factor						= 4
jump_ground_trace_range			= 1.5
jump_hit_trace_range			= 2
jump_build_line_distance		= 12.0
jump_min_distance				= 1.5
jump_max_distance				= 6.0
jump_max_angle					= 6.28
jump_max_height					= 3
jump_auto_aim_factor			= 1.7



RunAttack_PathDistance              = 8.0
RunAttack_StartDistance             = 4.0

DayTime_Begin                       = 0			; начала дня для монстра
DayTime_End                         = 21		; конец дня для монстра
Min_Satiety                         = 0.6		; мин. норма сытости (меньше - уже голодный)
Max_Satiety                         = 0.9		; макс. норма сытости (больше - очень сытый)

distance_to_corpse                  = 1.2		; дист. до трупа, при которой он переходит в состояние еды


;                           fSearchRange,fOptEnemyDistance,fOptEnemyDistanceWeight,fMinEnemyDistance,fMinEnemyDistanceWeight,fMaxEnemyDistance,fMaxEnemyDistanceWeight
selector_free_hunting               = 20.0,            20.0,                 1000.0,                 0.0,               10000.0,               1000.0,               10000.0,
;                           fSearchRange,fCoverFromEnemyWeight,fOptEnemyDistance,fOptEnemyDistanceWeight,fMinEnemyDistance,fMinEnemyDistanceWeight,fMaxEnemyDistance,fMaxEnemyDistanceWeight
selector_cover                      = 20.0,            -1000.0,                30.0,                 0.0,                  0.0,              100000.0,             100000.0,               1000.0,
selector_hear_sound                 = 20.0,            1.0,				1000.0,              0.0,               0.0,              1000.0,               10000.0,

selector_getaway                    = 20.0,            20.0,                1000.0,             0.0,               10000.0,		  1000.0,				10000.0,
selector_approach                   = 20.0,            1.0,                 1000.0,             0.0,               0.0,              1000.0,				10000.0,
;							  fSearchRange,fOptEnemyDistance,fOptEnemyDistanceWeight,fMinEnemyDistance,fMinEnemyDistanceWeight,fMaxEnemyDistance,fMaxEnemyDistanceWeight
selector_walk_around                = 20.0,            6.0,                 1000.0,             4.0,               5000.0,					8.0,				5000.0,

terrain                             = 255,255,255,255,30,40

;entity condition


satiety_v                           = 0.0001				;0.01			;скорость уменьшения сытости со временем
radiation_v                         = 0.00001		;0.004			;скорость уменьшения радиации
satiety_power_v                     = 0.0001		;0.01			;увеличение силы при уменьшении сытости
satiety_health_v                    = 0.0001	;0.03			;увеличение здоровья при уменьшении сытости
satiety_critical                    = -1.0		;0.25						;критическое значения сытости (в процентах от 0..1) когда здоровье начианает уменьшаться
radiation_health_v                  = 0.0	;		;уменьшение здоровья при воздействии радиации
health_restore_v					= 0.0006
morale_v                            = 0.01					;скорость восстановления морали
health_hit_part                     = 1.0		;0.8			;процент хита, уходящий на отнимание здоровья
power_hit_part                      = 1.0		;0.9			;процент хита, уходящий на отнимание силы
psy_health_v                        = 0.1						;скорость восстановления psy-здоровья

immunities_sect                     = chimera_immunities


;открытые раны
bleeding_v                          = 0.0005			;потеря крови при номинальной ране в секунду
wound_incarnation_v                 = 0.01				;крутизна кривой заживления (какой процент раны останется после заживления в игровую секунду)
min_wound_size                      = 0.01

;Health from which to play injured animation
DamagedThreshold                    = 0.4

sleep_health                        = 1.0		;1.5				;коэффициенты скоростей изменения параметров во время сна
sleep_power                         = 1.0		;1.5
sleep_satiety                       = 1.0		;0.8
sleep_radiation                     = 1.0	;1.1
sleep_psy_health                    = 1.0

eat_freq                            = 5.0		; частота укусов в сек
eat_slice                           = 0.001	; увеличение сытости при 1 укусе
eat_slice_weight                    = 10.0	; уменьшение еды у трупа


; Morale
Morale_Hit_Quant                    = 0.2
Morale_Attack_Success_Quant         = 0.1
Morale_Take_Heart_Speed             = 0.1
Morale_Despondent_Speed             = 0.1
Morale_Stable_Speed                 = 0.01
Morale_Despondent_Threashold        = 0.4


sound_idle                          = monsters\chimera\chimera_idle_
sound_eat                           = monsters\bloodsucker\eat_
sound_aggressive                    = monsters\chimera\chimera_attack_
sound_attack_hit                    = monsters\chimera\chimera_attack_hit_
sound_take_damage                   = monsters\chimera\chimera_hit_
sound_die                           = monsters\chimera\chimera_death_
sound_bkgnd                         = monsters\biting\def_
sound_threaten                      = monsters\boar\threaten_
sound_landing                       = monsters\boar\landing_
sound_steal                         = monsters\biting\def_
sound_panic                         = monsters\boar\hit_
sound_growling                      = monsters\biting\def_
sound_die_in_anomaly                = monsters\boar\die_

killer_clsids                       = Z_MINCER,Z_GALANT,ZS_BFUZZ,ZS_MBALD,ZS_GALAN,ZS_MINCE


idle_sound_delay                    = 95000
eat_sound_delay                     = 3000
attack_sound_delay                  = 12000

sound_distant_idle                  = monsters\chimera\chimera_idle_
distant_idle_sound_delay            = 80000
distant_idle_sound_range            = 100.0


eye_fov                             = 110
eye_range                           = 130


material                            = creatures\medium
DynamicObjectsCount                 = 32

squad_attack_algorithm              = 1
attack_effector                     = m_chimera_attack_effector

attack_params                       = m_chimera_attack_params
step_params                         = m_chimera_step_params

LegsCount                           = 4
damage                              = m_chimera_damage

;species of monster
species                             = chimera
monster_type                        = outdoor
community                           = chimera

vision_free_section                 = chimera_vision_free
vision_danger_section               = chimera_vision_danger

; ЗНАЧЕНИЯ visibility_threshold ДОЛЖНЫ БЫТЬ РАВНЫ для денжера и фри,
; иначе возникают артефакты с потерей видимости при переходе от денжера во фри.

[chimera_vision_free]
min_view_distance                   = 0.8				; коэффициент, который множится на eye_range, в зависимости от угла
max_view_distance                   = 1.0				; коэффициент, который множится на eye_range, в зависимости от угла
visibility_threshold                = 100.0				; значение, при достижении суммой которого объект считается видимым
always_visible_distance             = 0.3
time_quant                          = 0.001
decrease_value                      = 0.01				; значение, на которое уменьшается вес, если объект попал в фрустум, но отсёкся по каким-то причинам
velocity_factor                     = 0.5
luminocity_factor                   = 0.1 				; фактор освещения
transparency_threshold              = 0.5

[chimera_vision_danger]
min_view_distance                   = 0.8				; коэффициент, который множится на eye_range, в зависимости от угла
max_view_distance                   = 1.4				; коэффициент, который множится на eye_range, в зависимости от угла
visibility_threshold                = 30.0				; значение, при достижении суммой которого объект считается видимым
always_visible_distance             = 0.5
time_quant                          = 0.001
decrease_value                      = 0.01				; значение, на которое уменьшается вес, если объект попал в фрустум, но отсёкся по каким-то причинам
velocity_factor                     = 0.5
luminocity_factor                   = 0.1 				; фактор освещения
transparency_threshold              = 0.2


;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim						| time[0..1] | hit_power | impulse | impulse_dir (x,y,z)  |	Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
[m_chimera_attack_params]
stand_attack_0                      = 0.45,		0.55,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
stand_attack_1                      = 0.45,		0.55,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
jump_attack_1                       = 0.45,		0.7,		    300,       0.0, 1.0, 0.0,		 -1.8, 1.8, -1.8, 1.8,							  3.0
stand_run_attack_0                  = 0.75,		0.45,			100,       0.0, 1.0, 1.0,		 -0.6, 0.6, -0.6, 0.6,							  3.0


[m_chimera_attack_effector]

duality_h                           = 0.1; 0.01
duality_v                           = 0.1; 0.01
blur                                = 0.01
gray                                = 0.0
noise_intensity                     = 0.1;0.0
noise_grain                         = 1
noise_fps                           = 30
color_base                          = 0.65,0.15,0.1
color_gray                          = 0.333,0.333,0.333
color_add                           = 0.0,0.0,0.0
time                                = 3.00
time_attack                         = 0.05		; fade in
time_release                        = 0.50		; fade out

; camera effects
ce_time                             = 0.30 ;time
ce_amplitude                        = 12.0
ce_period_number                    = 2.0
ce_power                            = 1.0 ;0.7 ; power


[m_chimera_step_params]
;---------------------------------------------------------------------------
;	anim						| Cycles | time1 | power1 | time2 | power2 |
;---------------------------------------------------------------------------
stand_walk_fwd_0                    = 1,	   0.01,    1,	    0.25,    0.7,
stand_run_fwd_0                     = 1,	   0.01,    1,	    0.25,    0.6,

;===========================================================================
; IMMUNITIES
;===========================================================================
[chimera_immunities]
burn_immunity                       = 0.2
strike_immunity                     = 0.0
shock_immunity                      = 0.2
wound_immunity                      = 0.02
radiation_immunity                  = 0.0
telepatic_immunity                  = 0.0
chemical_burn_immunity              = 0.2
explosion_immunity                  = 0.13
fire_wound_immunity                 = 0.08


;--------------------------------------------------------------------------
; Chimera Damage
;--------------------------------------------------------------------------
[m_chimera_damage]

;bone_name		 = <hit_scale>,-1,<wound_scale>
;<hit_scale>	- коэфф. изменения хита (уменьшения здоровья) 
;<wound_scale>	- коэфф. изменения величины открытой раны

default							    = 0.5, -1, 0.1

bip01_pelvis                        = 1, -1, 0.1
bip01_spine                         = 1, -1, 0.1
bip01_spine1                        = 1, -1, 0.1
bip01_neck                          = 1, -1, 1.0
bip01_head                          = 1.25, -1, 0.1


;*********************************************************************************
; WEAK PROFILE
;*********************************************************************************
[chimera_weak]:m_chimera_e,weak_profile_base
$spawn                              = "monsters\chimeras\chimera_01_weak"

visual                              = monsters\chimera\chimera_01
corpse_visual                       = monsters\chimera\chimera_01

attack_params                       = m_chimera_weak_attack_params
health_hit_part                     = 1.0


[m_chimera_weak_attack_params]
;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim						| time[0..1] | hit_power | impulse | impulse_dir (x,y,z)  |	Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
stand_attack_0                      = 0.45,		0.4,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
stand_attack_1                      = 0.45,		0.4,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
jump_attack_1                       = 0.45,		0.55,		    300,       0.0, 1.0, 0.0,		 -1.8, 1.8, -1.8, 1.8,							  3.0
stand_run_attack_0                  = 0.75,		0.5,			100,       0.0, 1.0, 1.0,		 -0.6, 0.6, -0.6, 0.6,							  3.0

;*********************************************************************************
; NORMAL PROFILE
;*********************************************************************************
[chimera_normal]:m_chimera_e,normal_profile_base
$spawn                              = "monsters\chimeras\chimera_02_normal"

visual                              = monsters\chimera\chimera_02
corpse_visual                       = monsters\chimera\chimera_02

attack_params                       = m_chimera_normal_attack_params
health_hit_part                     = 0.65

[m_chimera_normal_attack_params]
;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim						| time[0..1] | hit_power | impulse | impulse_dir (x,y,z)  |	Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
stand_attack_0                      = 0.45,		0.6,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
stand_attack_1                      = 0.45,		0.6,		    100,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							  3.0
jump_attack_1                       = 0.45,		0.85,		    300,       0.0, 1.0, 0.0,		 -1.8, 1.8, -1.8, 1.8,							  3.0
stand_run_attack_0                  = 0.75,		0.75,			100,       0.0, 1.0, 1.0,		 -0.6, 0.6, -0.6, 0.6,							  3.0

;*********************************************************************************
; STRONG PROFILE
;*********************************************************************************
[chimera_strong]:m_chimera_e,strong_profile_base
$spawn                              = "monsters\chimeras\chimera_03_strong"

visual                              = monsters\chimera\chimera_03
corpse_visual                       = monsters\chimera\chimera_03

attack_params                       = m_chimera_strong_attack_params
DamagedThreshold                    = 0.2
panic_threshold                     = 0.0
health_hit_part                     = 0.45

[m_chimera_strong_attack_params]

;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim						| time[0..1] | hit_power | impulse | impulse_dir (x,y,z)  |	Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
stand_attack_0                      = 0.45,		0.9,		    200,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
stand_attack_1                      = 0.45,		0.9,		    200,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
jump_attack_1                       = 0.45,		1.15,		    400,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
stand_run_attack_0                  = 0.75,		1.0,			200,       0.0, 1.0, 1.0,		 -0.6, 0.6, -0.6, 0.6,							3.0

[chimera_night_strong]:chimera_strong,uniq_profile_base
$spawn                              = "monsters\chimeras\chimera_03a_night_strong"

visual                              = monsters\chimera\chimera_03_night
corpse_visual                       = monsters\chimera\chimera_03_night

eye_range                           = 110

;*********************************************************************************
; VERY STRONG PROFILE
;*********************************************************************************
[chimera_very_strong]:m_chimera_e,very_strong_profile_base
$spawn                              = "monsters\chimeras\chimera_04_very_strong"

visual                              = monsters\chimera\chimera_04
corpse_visual                       = monsters\chimera\chimera_04

attack_params                       = m_chimera_very_strong_attack_params
DamagedThreshold                    = 0.2
panic_threshold                     = 0.0
health_hit_part                     = 0.25

[m_chimera_very_strong_attack_params]

;---------------------------------------------------------------------------------------------------------------------------------------------
;	anim						| time[0..1] | hit_power | impulse | impulse_dir (x,y,z)  |	Field of hit_test  (left,right, bottom, top ) |	Test Dist
;---------------------------------------------------------------------------------------------------------------------------------------------
stand_attack_0                      = 0.45,		1.2,		    200,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
stand_attack_1                      = 0.45,		1.2,		    200,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
jump_attack_1                       = 0.45,		1.4,		    400,       0.0, 1.0, 0.0,		 -1.0, 1.0, -1.0, 1.0,							3.0
stand_run_attack_0                  = 0.75,		1.25,			200,       0.0, 1.0, 1.0,		 -0.6, 0.6, -0.6, 0.6,							3.0

;===========================================================================
; INDOOR PROFILES
;===========================================================================
[chimera_indoor_base]
monster_type                        = indoor

max_hear_dist                       = 100
;--------------------------------------------------------------------------
; Jump parameters
;--------------------------------------------------------------------------
jump_delay						= 1  ; минимальная задержка после прыжка до возможности следующего прыжка
jump_factor						= 3
jump_ground_trace_range			= 1.5
jump_hit_trace_range			= 2
jump_build_line_distance		= 15.0
jump_min_distance				= 0.5
jump_max_distance				= 3
jump_max_angle					= 3.14
jump_max_height					= 1.2
jump_auto_aim_factor			= 0.5

[chimera_ug_weak]:chimera_weak,chimera_indoor_base
$spawn                              = "monsters\chimeras\ug\chimera_ug_01_weak"
visual                              = monsters\chimera\chimera_ug_01

[chimera_ug_normal]:chimera_normal,chimera_indoor_base
$spawn                              = "monsters\chimeras\ug\chimera_ug_02_normal"
visual                              = monsters\chimera\chimera_ug_02

[chimera_ug_strong]:chimera_strong,chimera_indoor_base
$spawn                              = "monsters\chimeras\ug\chimera_ug_03_strong"
visual                              = monsters\chimera\chimera_ug_03

[chimera_ug_very_strong]:chimera_very_strong,chimera_indoor_base
$spawn                              = "monsters\chimeras\ug\chimera_ug_04_very_strong"
visual                              = monsters\chimera\chimera_ug_04
