[logic]
active = {+dar_barman_has_all_x18_docs} sr_idle@check, {-dar_barman_has_all_x18_docs} sr_idle@wait

[sr_idle@wait]
on_info = {+dar_barman_has_all_x18_docs} sr_idle@check

[sr_idle@check]
on_actor_inside = sr_idle@in
on_actor_outside = sr_idle@out

[sr_idle@out]
on_actor_inside = {!check_for_enemy(35)} sr_idle@in %=enable_save =set_safe_zone(in) =send_tip_hud(actor:hmm:st_partly_safe_zone_no_enemy:15)%
on_actor_inside2 = {=check_for_enemy(35)} sr_idle@in_check %=set_safe_zone(in) =send_tip_hud(actor:hmm:st_partly_safe_zone_enemy:15)%

[sr_idle@in_check]
on_actor_outside = sr_idle@out %=enable_save =set_safe_zone(out)%
on_info = {!check_for_enemy(35)} sr_idle@in %=enable_save =send_tip_hud(actor:hmm:st_partly_safe_zone_no_enemy_in:15)%

[sr_idle@in]
on_info = {=check_for_enemy(15)} sr_idle@in_check %=enable_save =send_tip_hud(actor:hmm:st_partly_safe_zone_enemy_in:15)%
on_actor_outside = sr_idle@out %=enable_save =set_safe_zone(out)%